close all;

%% Import of data generated by Python simulation
Goodput1_simulated=table2array(Goodput1)';
Goodput2_simulated=table2array(Goodput2)';
Goodput3_simulated=table2array(Goodput3)';
Goodput4_simulated=table2array(Goodput4)';

AoI1_simulated=table2array(AoI1)';
AoI2_simulated=table2array(AoI2)';
AoI3_simulated=table2array(AoI3)';
AoI4_simulated=table2array(AoI4)';

Devices=[1000, 11640, 22280, 32928, 43568, 54208, 64856, 75496, 86136, 96784, 107424, ...
    118064, 128712, 139352, 150000];

%Configuração 1 -> h:1 - CR:5/6
%Configuração 2 -> h:2 - CR:2/3
%Configuração 3 -> h:2 - CR:1/2
%Configuração 4 -> h:3 - CR:1/3


figure; hold on;
% 
% plot(Goodput1_simulated/3600, AoI1_simulated, 'o-');
% plot(Goodput2_simulated/3600, AoI2_simulated, 's-');
% plot(Goodput3_simulated/3600, AoI3_simulated, 'd-');
% plot(Goodput4_simulated/3600, AoI4_simulated, '*-');
% 
% ylabel('$\mathrm{Goodput}\,\mathrm{[bytes/s]}$','Interpreter','LaTeX','Fontsize',13);
% xlabel('$\mathrm{AoI}\,{(ms)}$','Interpreter','LaTeX','Fontsize',13);
% title('Trade-off entre Goodput e AoI');
% legend('h:1 - CR:5/6', 'h:2 - CR:2/3', 'h:2 - CR:1/2', 'h:3 - CR:1/3', 'Teórico','Fontsize',11);
% grid on;

colors = [
    0.000, 0.447, 0.741;
    0.850, 0.325, 0.098;
    0.929, 0.694, 0.125;
    0.494, 0.184, 0.556
];





% Plota cada curva com marcador e cor diferente para melhor visualização
h1 = plot(Goodput1_simulated/3600, AoI1_simulated, 'o-', 'LineWidth', 1.5, ...
    'Color', [0.000, 0.447, 0.741], 'MarkerFaceColor', [0.000, 0.447, 0.741], 'MarkerSize', 8);

h2 = plot(Goodput2_simulated/3600, AoI2_simulated, 's-', 'LineWidth', 1.5, ...
    'Color', [0.850, 0.325, 0.098], 'MarkerFaceColor', [0.850, 0.325, 0.098], 'MarkerSize', 8);

h3 = plot(Goodput3_simulated/3600, AoI3_simulated, 'd-', 'LineWidth', 1.5, ...
    'Color', [0.929, 0.694, 0.125], 'MarkerFaceColor', [0.929, 0.694, 0.125], 'MarkerSize', 8);

h4 = plot(Goodput4_simulated/3600, AoI4_simulated, '*-', 'LineWidth', 1.5, ...
    'Color', [0.494, 0.184, 0.556], 'MarkerFaceColor', [0.494, 0.184, 0.556], 'MarkerSize', 8);


% Marca início de cada curva com um 'x' preto
plot(Goodput1_simulated(1)/3600, AoI1_simulated(1), 'x', 'Color', 'k', 'MarkerSize', 10, 'LineWidth', 1.5);
plot(Goodput2_simulated(1)/3600, AoI2_simulated(1), 'x', 'Color', 'k', 'MarkerSize', 10, 'LineWidth', 1.5);
plot(Goodput3_simulated(1)/3600, AoI3_simulated(1), 'x', 'Color', 'k', 'MarkerSize', 10, 'LineWidth', 1.5);
plot(Goodput4_simulated(1)/3600, AoI4_simulated(1), 'x', 'Color', 'k', 'MarkerSize', 10, 'LineWidth', 1.5);

% Adiciona texto explicativo próximo aos pontos iniciais
text(Goodput1_simulated(1)/3600, AoI1_simulated(1), ' Início: menor N', ...
    'VerticalAlignment', 'bottom', 'HorizontalAlignment', 'left', 'FontSize', 9);

text(Goodput2_simulated(1)/3600, AoI2_simulated(1), ' Início: menor N', ...
    'VerticalAlignment', 'bottom', 'HorizontalAlignment', 'left', 'FontSize', 9);

text(Goodput3_simulated(1)/3600, AoI3_simulated(1), ' Início: menor N', ...
    'VerticalAlignment', 'bottom', 'HorizontalAlignment', 'left', 'FontSize', 9);

text(Goodput4_simulated(1)/3600, AoI4_simulated(1), ' Início: menor N', ...
    'VerticalAlignment', 'bottom', 'HorizontalAlignment', 'left', 'FontSize', 9);




% Eixo y = Goodput, eixo x = AoI, coerente com a fórmula
ylabel('$\mathrm{Goodput}\,\mathrm{[bytes/s]}$', 'Interpreter', 'LaTeX', 'FontSize', 13);
xlabel('$\mathrm{AoI}\,\mathrm{[ms]}$', 'Interpreter', 'LaTeX', 'FontSize', 13);
title('Trade-off entre Goodput e AoI', 'Interpreter', 'none', 'FontSize', 12);

legend([h1, h2, h3, h4], ...
    {'h:1 - CR:5/6', 'h:2 - CR:2/3', 'h:2 - CR:1/2', 'h:3 - CR:1/3'}, ...
    'FontSize', 11, 'Location', 'best');

ax = ancestor(h1, 'axes');
ax.XAxis.Exponent = 0;
ax.XAxis.TickLabelFormat = '%.0f';

grid on;
hold off;